<% 
  provide(:title, "Info Items")
%>

<!-- === PAGE HEADER === -->

<div class="row add-top-margin">
  <div class="span12">
    <div class="header-card admin-header-card">
      <div class="white-background no-tabs">&nbsp;</div>

      <div class="primary-header span6">
        <span class="header-image" >
          <i class="fa fa-user"></i>
        </span>
        <span class="header-text">
          <h1>Info Items Report</h1>
          <h2>Admin Tools</h2>
        </span>
      </div>

      <div class="secondary-header span6">
        <span class="header-text">
          <h2>
            Showing <%= ((@page.to_i - 1) * @page_size.to_i) + 1 %>
            - <%= [(@page.to_i * @page_size.to_i), @info_items.count].min %>
            of <%= @info_items.count %>
          </h2>
          <% unless @type.blank? %>
            <h3>
              Only showing items with type = "<%= @type %>"
            </h3>
          <% end %>
        </span>            
      </div>
    </div>
  </div>
</div>

<!-- === ENTRIES LIST === -->

<% if !@info_items.blank? %>
  
  <div class="row">
    <div class="span12">
      <div class="pagination-header">
        <div class="pagination"><%= paginate @info_items %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="span12">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Created</th>
              <th>Group</th>
            </tr>
          </thead>
          <tbody>
            <% @info_items.each do |info_item| %>
              <tr>
                <td>
                  <%= link_to info_item.name, info_item_path(info_item, format: :json) %>
                </td>
                <td>
                  <%= link_to info_item.type, info_items_path(page_size: @page_size, \
                    type: info_item.type) %>
                </td>
                <td>
                  <%= info_item.created_at.to_s :short_date_time %>
                </td>
                <td>
                  <% if info_item.group_id %>
                    <%= link_to info_item.group.name, group_path(info_item.group) %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
    </div>
  </div>

  <div class="row">
    <div class="span12">
      <div class="pagination-footer">
        <div class="pagination"><%= paginate @info_items %></div>
      </div>
    </div>
  </div>

<% end %>