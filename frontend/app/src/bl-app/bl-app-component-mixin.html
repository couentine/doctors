<!--
# Badge List App Component Mixin #
  
All Badge List app components should extend this mixin. It provides an `app` property that allows access to the `bl-app` component.
It also provides methods for adding toast and opening dialogs.
-->
<script>

  BlAppComponentMixin = function(superClass) {
    return class extends superClass {

      static get properties() {
        return {
          
          /** Links to the `<bl-app>` component. */
          app: Object,
          
          /** The details of the logged in user provided from the backend on initial page load. Null if logged out. */
          currentUser: Object

        };
      }

      // #=== LIFECYCLE EVENTS ===#

      connectedCallback() {
        if (super.connectedCallback) super.connectedCallback();

        this.app = document.querySelector('bl-app');

        // Add a listener for when the current user is set
        this.app.addEventListener('current-user-changed', e => this._appCurrentUserChanged(e));
      }

      // #=== LISTENER & OBSERVER METHODS ===#

      _appCurrentUserChanged(e) {
        this.currentUser = this.app.currentUser;
      }

    }
  }

</script>