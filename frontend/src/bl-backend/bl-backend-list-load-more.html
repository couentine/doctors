<!-- #=== POLYMER & SHIMS ===# -->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<!-- #=== STANDARD POLYMER COMPONENTS ===# -->
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner-lite.html">

<!-- #=== BADGE LIST COMPONENTS ===# -->
<link rel="import" href="../bl-styles/bl-styles.html">

<!--
# Backend List Load More Button #

Binds to a local target property that is managed by a backend-list.
If there is another page of results, this element displays a "Load More" button that loads the next page of results.
When the list status is `loading`, this element displays a spinner.
-->
<dom-module id="bl-backend-list-load-more">
  <template>

    <style include="bl-style-classes">
      
      /* === LAYOUT & BASE STYLES === */
        
        :host {
          display: flex;
          justify-content: center;
          margin: 1em;
        }

      /* === SPINNER STYLES === */

        paper-spinner-lite {
          margin: 0.64em; /* This ensures that the height is the same as the button so loading doesn't change page height. */
        }

        paper-spinner-lite.red { --paper-spinner-color: var(--bl-red-500); }
        paper-spinner-lite.pink { --paper-spinner-color: var(--bl-pink-500); }
        paper-spinner-lite.purple { --paper-spinner-color: var(--bl-purple-500); }
        paper-spinner-lite.deep-purple { --paper-spinner-color: var(--bl-deep-purple-500); }
        paper-spinner-lite.indigo { --paper-spinner-color: var(--bl-indigo-500); }
        paper-spinner-lite.blue { --paper-spinner-color: var(--bl-blue-500); }
        paper-spinner-lite.light-blue { --paper-spinner-color: var(--bl-light-blue-500); }
        paper-spinner-lite.cyan { --paper-spinner-color: var(--bl-cyan-500); }
        paper-spinner-lite.teal { --paper-spinner-color: var(--bl-teal-500); }
        paper-spinner-lite.green { --paper-spinner-color: var(--bl-green-500); }
        paper-spinner-lite.light-green { --paper-spinner-color: var(--bl-light-green-500); }
        paper-spinner-lite.lime { --paper-spinner-color: var(--bl-lime-500); }
        paper-spinner-lite.yellow { --paper-spinner-color: var(--bl-yellow-500); }
        paper-spinner-lite.amber { --paper-spinner-color: var(--bl-amber-500); }
        paper-spinner-lite.orange { --paper-spinner-color: var(--bl-orange-500); }
        paper-spinner-lite.deep-orange { --paper-spinner-color: var(--bl-deep-orange-500); }
        paper-spinner-lite.brown { --paper-spinner-color: var(--bl-brown-500); }
        paper-spinner-lite.grey { --paper-spinner-color: var(--bl-grey-500); }
        paper-spinner-lite.blue-grey { --paper-spinner-color: var(--bl-blue-grey-500); }

    </style>

    <paper-button id="button" on-tap="getNextPage" class$="[[color]]" hidden="[[!showButton]]" raised>
      Load More...
    </paper-button>

    <paper-spinner-lite id="spinner" alt="Loading" hidden="[[!targetList.status.isLoading]]" active class$="[[color]]"></paper-spinner-lite>

  </template>

  <script>
    class BlBackendListLoadMore extends Polymer.Element {
      
      static get is() { return 'bl-backend-list-load-more'; }

      static get properties() {
        return {
          
          /** Set this to the local property which is managed by `<bl-backend-list>`. */
          targetList: {
            type: Object
          },

          /** Sets the color of the paper button and the spinner. Use the badge list color code. */
          color: {
            type: String
          },

          showButton: {
            type: Boolean,
            computed: '_showButton(targetList.hasNextPage, targetList.status.isReady)'
          }

        }
      }

      // #=== PUBLIC ACTION METHODS ===#

      getNextPage() {
        this.targetList.listOperations.getNextPage()
      }

      // #=== PROPERTY COMPUTER METHODS ===#

      _showButton(hasNextPage, isReady) {
        return isReady && hasNextPage;
      }

    }

    window.customElements.define(BlBackendListLoadMore.is, BlBackendListLoadMore);
  </script>
</dom-module>
